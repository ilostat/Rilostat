<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to ilostat R package • Rilostat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ilostat R package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rilostat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/Rilostat.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/RilostatVisu.html">Rilostat Visualization</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ilostat/Rilostat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to ilostat R package</h1>
                        <h4 class="author">ILO Department of Statistics</h4>
            
            <h4 class="date">2019-05-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ilostat/Rilostat/blob/master/../vignettes/Rilostat.Rmd"><code>../vignettes/Rilostat.Rmd</code></a></small>
      <div class="hidden name"><code>Rilostat.Rmd</code></div>

    </div>

    
    
<div id="the-ilostat-r-package-in-a-few-words" class="section level1">
<h1 class="hasAnchor">
<a href="#the-ilostat-r-package-in-a-few-words" class="anchor"></a>The ilostat R package in a few words</h1>
<p>This R package provides tools to access, download and work with the data contained in <a href="https://www.ilo.org/ilostat">ILOSTAT</a>, the ILO Department of Statistics’ online database. ILOSTAT’s data and related metadata are also directly available through ILOSTAT’s website.</p>
<p>For more information on ILOSTAT’s R package, including contact details and source code, refer to its <a href="https://github.com/ilostat/Rilostat">github page</a>.</p>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The <a href="https://www.ilo.org">ILO</a>’s main online database, <a href="https://www.ilo.org/ilostat">ILOSTAT</a>, maintained by the <a href="https://www.ilo.org/stats">Department of Statistics</a>, is the world’s largest repository of labour market statistics. It covers all countries and regions and a wide range of labour-related topics, including employment, unemployment, wages, working time and labour productivity, to name a few. It includes time series going back as far as 1938; annual, quarterly and monthly labour statistics; country-level, regional and global estimates; and even projections of the main labour market indicators.</p>
<p>ILOSTAT’s website provides immediate access to all its data and related metadata through different ways. Basic users can simply view the desired data online or download it in Excel or csv formats. More advanced users can take advantage of ILOSTAT’s well-structured <a href="http://www.ilo.org/ilostat/faces/oracle/webcenter/portalapp/pagehierarchy/Page30.jspx">bulk download facility</a> (<a href="http://www.ilo.org/ilostat-files/WEB_bulk_download/ILOSTAT_BulkDownload_Guidelines.pdf">user guide</a>), or the SDMX web service (<a href="http://www.ilo.org/ilostat/content/conn/ILOSTATContentServer/path/Contribution%20Folders/statistics/web_pages/static_pages/technical_page/ilostat_appl/SDMX_User_Guide.pdf">user guide</a>).</p>
<p>The ilostat R package (<code>'Rilostat'</code>) was designed to give data users the ability to access the ILOSTAT database, search for data, rearrange the information as needed, download it in the desired format, and make various data visualizations, all in a programmatic and replicable manner, with the possibility of quickly re-running the queries as required.</p>
<div id="main-features-of-the-ilostat-r-package" class="section level4">
<h4 class="hasAnchor">
<a href="#main-features-of-the-ilostat-r-package" class="anchor"></a>Main features of the ilostat R package</h4>
<ul>
<li><p>Provides access to all annual, quarterly, and monthly data available via the ILOSTAT <a href="http://www.ilo.org/ilostat/faces/oracle/webcenter/portalapp/pagehierarchy/Page30.jspx">bulk download facility</a> (<a href="http://www.ilo.org/ilostat-files/WEB_bulk_download/ILOSTAT_BulkDownload_Guidelines.pdf">user guide</a>)</p></li>
<li><p>Allows to search for and download data and related metadata in English, French and Spanish</p></li>
<li><p>Gives the ability to return <code>POSIXct</code> dates for easy integration into plotting and time-series analysis techniques</p></li>
<li><p>Returns data in long format for direct integration with packages like <code>ggplot2</code> and <code>dplyr</code></p></li>
<li><p>Gives immediate access to the most recent updates</p></li>
<li><p>Allows for <code>grep</code>-style searching for data descriptions and names</p></li>
<li><p>Provides access to the ILOSTAT catalogue of related descriptive metadata (<a href="http://www.ilo.org/ilostat/content/conn/ILOSTATContentServer/path/Contribution%20Folders/statistics/web_pages/static_pages/technical_page/ilostat_appl/SDMX_User_Guide.pdf">user guide</a>)</p></li>
</ul>
</div>
<div id="acknowledgements" class="section level4">
<h4 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h4>
<p>The developer of this package drew extensive inspiration from the <a href="https://cran.r-project.org/web/packages/eurostat">eurostat R package</a> and its related documentation:</p>
<ul>
<li>
<a href="https://journal.r-project.org/archive/2017/RJ-2017-019/RJ-2017-019.pdf">Retrieval and Analysis of Eurostat Open Data with the eurostat Package</a> - <a href="https://github.com/antagomir">Leo Lahti</a>, <a href="https://github.com/pbiecek">Przemyslaw Biecek</a>, <a href="https://github.com/muuankarski">Markus Kainu</a> and <a href="https://github.com/jhuovari">Janne Huovari</a>. R Journal 9(1), 385-392, 2017.</li>
</ul>
</div>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>To install the release version, use the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"Rilostat"</span>)</a></code></pre></div>
<p>To install the development version, use the following command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(devtools)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'devtools'</span>)}</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">install_github</span>(<span class="st">"ilostat/Rilostat"</span>)</a></code></pre></div>
<p>The ilostat R package (<code>'Rilostat'</code>) includes the following functions:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(Rilostat)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.data.frame">as.data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>(<span class="st">"package:Rilostat"</span>))</a></code></pre></div>
<pre><code>##   ls("package:Rilostat")
## 1    clean_ilostat_cache
## 2            get_ilostat
## 3        get_ilostat_dic
## 4        get_ilostat_toc
## 5                ilostat
## 6          label_ilostat
## 7           sdmx_ilostat</code></pre>
<p>We do not expect to update the ilostat R package too often, but based on questions and remarks from ILOSTAT data users, we will progressively create more examples, tutorials, demos and apps. We will publicly share all of this via the function:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/ilostat.html">ilostat</a></span>()</a></code></pre></div>
</div>
<div id="search-for-data" class="section level1">
<h1 class="hasAnchor">
<a href="#search-for-data" class="anchor"></a>Search for data</h1>
<p>Unless you already know the code of the indicator or the ref_area (reference area - countries or regions) that you want to download, the first step would be to search for the data you are interested in. <code><a href="../reference/get_ilostat_toc.html">get_ilostat_toc()</a></code> provides grep style searching of all available indicators from ILOSTAT’s bulk download facility and returns the indicators matching your query. <code><a href="../reference/get_ilostat_toc.html">get_ilostat_toc(segment = 'ref_area')</a></code> returns the datasets available by ref_area (‘country’ and ‘region’).</p>
<p>To access the table of contents of all available indicators in ILOSTAT (by indicator):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">toc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>()</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 1a. Extract, ‘Table of contents by indicator in English’</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">indicator</th>
<th align="left">indicator.label</th>
<th align="left">freq</th>
<th align="left">freq.label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">GDP_211P_NOC_NB_A</td>
<td align="left">GDP_211P_NOC_NB</td>
<td align="left">Output per worker (GDP constant 2011 international $ in PPP) – ILO modelled estimates, November 2018</td>
<td align="left">A</td>
<td align="left">Annual</td>
</tr>
<tr class="even">
<td align="left">GDP_205U_NOC_NB_A</td>
<td align="left">GDP_205U_NOC_NB</td>
<td align="left">Output per worker (GDP constant 2010 US $) – ILO modelled estimates, November 2018</td>
<td align="left">A</td>
<td align="left">Annual</td>
</tr>
<tr class="odd">
<td align="left">POP_2LDR_NOC_RT_A</td>
<td align="left">POP_2LDR_NOC_RT</td>
<td align="left">Labour dependency ratio – ILO modelled estimates, November 2018</td>
<td align="left">A</td>
<td align="left">Annual</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>All settings are available in the 3 official languages of the ILO: English (<code>'en'</code>), French (<code>'fr'</code>) and Spanish (<code>'es'</code>). The default is <code>'en'</code>.</p>
<p>For instance, to access the table of contents of all available datasets by reference area in ILOSTAT in Spanish:</p>
<p><br></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">toc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(<span class="dt">segment =</span> <span class="st">'ref_area'</span>, <span class="dt">lang =</span> <span class="st">'es'</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 1b. Extract, ‘Table of contents by ref_area in Spanish’</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">ref_area</th>
<th align="left">ref_area.label</th>
<th align="left">freq</th>
<th align="left">freq.label</th>
<th align="left">size</th>
<th align="left">data.start</th>
<th align="left">data.end</th>
<th align="left">last.update</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABW_A</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="left">A</td>
<td align="left">Anual</td>
<td align="left">54.28 KB</td>
<td align="left">1960</td>
<td align="left">2018</td>
<td align="left">12/03/2019 12:03:07</td>
</tr>
<tr class="even">
<td align="left">ABW_M</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="left">M</td>
<td align="left">Mensual</td>
<td align="left">14.14 KB</td>
<td align="left">1984M02</td>
<td align="left">2019M01</td>
<td align="left">14/04/2019 09:38:34</td>
</tr>
<tr class="odd">
<td align="left">AFG_A</td>
<td align="left">AFG</td>
<td align="left">Afganistán</td>
<td align="left">A</td>
<td align="left">Anual</td>
<td align="left">450.98 KB</td>
<td align="left">1970</td>
<td align="left">2030</td>
<td align="left">05/05/2019 09:38:03</td>
</tr>
</tbody>
</table>
<p>You can search for words or expressions within the table of contents listing all of ILOSTAT’s indicators.</p>
<p>For example, searching for the word “bargaining” will return the indicators containing that word somewhere in the indicator information:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">toc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(<span class="dt">search =</span> <span class="st">'bargaining'</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 1c. ‘Table of contents by indicator with search word ’bargaining’’</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">indicator</th>
<th align="left">indicator.label</th>
<th align="left">freq</th>
<th align="left">freq.label</th>
<th align="left">size</th>
<th align="left">data.start</th>
<th align="left">data.end</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">ILR_CBCT_NOC_RT_A</td>
<td align="left">ILR_CBCT_NOC_RT</td>
<td align="left">Collective bargaining coverage rate (%)</td>
<td align="left">A</td>
<td align="left">Annual</td>
<td align="left">3.92 KB</td>
<td align="left">2000</td>
<td align="left">2016</td>
</tr></tbody>
</table>
<p>Similarly, you can also search the list of all available datasets by reference area for a given reference area (using a country or region name or code) or even for a given data frequency (annual, quarterly or monthly). The search also allows you to look for several alternative and/or additional items at once.</p>
<p>For instance, to look for datasets with annual data for either Albania or France:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">toc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(<span class="dt">segment =</span> <span class="st">'ref_area'</span>, <span class="dt">search =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'France|Albania'</span>, <span class="st">'Annual'</span>), </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">                                            <span class="dt">fixed =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 1d. ‘Table of contents by ref_area with search words ’France’ or ‘Albania’ and ‘Annual’’</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">ref_area</th>
<th align="left">ref_area.label</th>
<th align="left">freq</th>
<th align="left">freq.label</th>
<th align="left">size</th>
<th align="left">data.start</th>
<th align="left">data.end</th>
<th align="left">last.update</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ALB_A</td>
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="left">A</td>
<td align="left">Annual</td>
<td align="left">1.02 MB</td>
<td align="left">1960</td>
<td align="left">2030</td>
<td align="left">05/05/2019 09:38:25</td>
</tr>
<tr class="even">
<td align="left">FRA_A</td>
<td align="left">FRA</td>
<td align="left">France</td>
<td align="left">A</td>
<td align="left">Annual</td>
<td align="left">3.07 MB</td>
<td align="left">1956</td>
<td align="left">2030</td>
<td align="left">05/05/2019 09:38:33</td>
</tr>
</tbody>
</table>
<p>You can also manipulate ILOSTAT’s table of contents’ dataframe using the basic R filter. If you are already familiar with ILOSTAT data and the way it is structured, you can easily filter what you want.</p>
<p>For example, if you know beforehand you want data only from ILOSTAT’s Short Term Indicators dataset (code “STI”) and you are only interested in monthly data (code “M”) you can simply do:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">toc &lt;-<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(), collection <span class="op">==</span><span class="st"> 'STI'</span>, freq <span class="op">==</span><span class="st"> 'M'</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 1e. Extract, ‘Table of contents by indicator filtered for Monthly Short term indicators’</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">indicator</th>
<th align="left">indicator.label</th>
<th align="left">freq</th>
<th align="left">freq.label</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">POP_XWAP_SEX_AGE_NB_M</td>
<td align="left">POP_XWAP_SEX_AGE_NB</td>
<td align="left">Working-age population by sex and age (thousands)</td>
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
<tr class="even">
<td align="left">POP_XWAP_SEX_AGE_EDU_NB_M</td>
<td align="left">POP_XWAP_SEX_AGE_EDU_NB</td>
<td align="left">Working-age population by sex, age and education (thousands)</td>
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
<tr class="odd">
<td align="left">POP_XWAP_SEX_AGE_GEO_NB_M</td>
<td align="left">POP_XWAP_SEX_AGE_GEO_NB</td>
<td align="left">Working-age population by sex, age and rural / urban areas (thousands)</td>
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
<tr class="even">
<td align="left">EAP_TEAP_SEX_AGE_NB_M</td>
<td align="left">EAP_TEAP_SEX_AGE_NB</td>
<td align="left">Labour force by sex and age (thousands)</td>
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
<tr class="odd">
<td align="left">EAP_TEAP_SEX_AGE_EDU_NB_M</td>
<td align="left">EAP_TEAP_SEX_AGE_EDU_NB</td>
<td align="left">Labour force by sex, age and education (thousands)</td>
<td align="left">M</td>
<td align="left">Monthly</td>
</tr>
</tbody>
</table>
</div>
<div id="download-data" class="section level1">
<h1 class="hasAnchor">
<a href="#download-data" class="anchor"></a>Download data</h1>
<p>The function <code><a href="../reference/get_ilostat.html">get_ilostat()</a></code> explores ILOSTAT’s datasets and returns datasets by indicator (default, segment <code>indicator</code>) or by reference area (segment <code>ref_area</code>). The id of each dataset is made up by the code of the segment chosen (indicator code or reference area code) and the code of the data frequency required (annual, quarterly or monthly), joined by an underscore.</p>
<div id="get-a-single-dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#get-a-single-dataset" class="anchor"></a>Get a single dataset:</h4>
<p>As stated above, you can easily access the single dataset of your choice through the <code><a href="../reference/get_ilostat.html">get_ilostat()</a></code> function, by indicating the code of the dataset desired (indicator_frequency or ref_area_frequency).</p>
<p>If you want to access annual data for indicator code UNE_2UNE_SEX_AGE_NB, you should type:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_2UNE_SEX_AGE_NB_A'</span>, <span class="dt">segment =</span> <span class="st">'indicator'</span>) </a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 2a. Extract, ‘Annual unemployment by sex and age, ILO modelled estimates, Nov. 2018’</caption>
<thead><tr class="header">
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
<th align="left">time</th>
<th align="right">obs_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">XA:2198</td>
<td align="left">UNE_2UNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_YGE15</td>
<td align="left">1991</td>
<td align="right">127.535</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">XA:2198</td>
<td align="left">UNE_2UNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
<td align="left">1991</td>
<td align="right">63.745</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">XA:2198</td>
<td align="left">UNE_2UNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_YGE25</td>
<td align="left">1991</td>
<td align="right">63.790</td>
</tr>
</tbody>
</table>
<p>If you want to access all annual data available in ILOSTAT for Armenia:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'ARM_A'</span>, <span class="dt">segment =</span> <span class="st">'ref_area'</span>) </a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 2b. Extract, ‘Armenia, annual data’</caption>
<thead><tr class="header">
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
<th align="left">time</th>
<th align="right">obs_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ARM</td>
<td align="left">XA:1931</td>
<td align="left">GDP_211P_NOC_NB</td>
<td align="left">NA</td>
<td align="left">NOC_VALUE</td>
<td align="left">1991</td>
<td align="right">8195.842</td>
</tr>
<tr class="even">
<td align="left">ARM</td>
<td align="left">XA:1931</td>
<td align="left">GDP_211P_NOC_NB</td>
<td align="left">NA</td>
<td align="left">NOC_VALUE</td>
<td align="left">1992</td>
<td align="right">4871.177</td>
</tr>
<tr class="odd">
<td align="left">ARM</td>
<td align="left">XA:1931</td>
<td align="left">GDP_211P_NOC_NB</td>
<td align="left">NA</td>
<td align="left">NOC_VALUE</td>
<td align="left">1993</td>
<td align="right">4722.154</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="get-multiple-datasets" class="section level4">
<h4 class="hasAnchor">
<a href="#get-multiple-datasets" class="anchor"></a>Get multiple datasets:</h4>
<p>It is also possible to download multiple datasets at once, simply by setting the dataset’s id as a vector of ids or a tibble that lists ids in a specific column:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'AFG_A'</span>, <span class="st">'TTO_A'</span>), <span class="dt">segment =</span> <span class="st">'ref_area'</span>) </a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(dat, ref_area)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   ref_area      n
##   &lt;chr&gt;     &lt;int&gt;
## 1 AFG       59548
## 2 TTO      113491</code></pre>
<p><br></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">toc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(<span class="dt">search =</span> <span class="st">'CPI_'</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> toc, <span class="dt">segment =</span> <span class="st">'indicator'</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb15-4" data-line-number="4"></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(dat, indicator)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   indicator            n
##   &lt;chr&gt;            &lt;int&gt;
## 1 CPI_ACPI_COI_RT 184570
## 2 CPI_MCPI_COI_RT 159458
## 3 CPI_NCPD_COI_RT  84038
## 4 CPI_NCYR_COI_RT 107944
## 5 CPI_NWGT_COI_DT  26026</code></pre>
</div>
</div>
<div id="time-format" class="section level1">
<h1 class="hasAnchor">
<a href="#time-format" class="anchor"></a>Time format</h1>
<p>The function <code><a href="../reference/get_ilostat.html">get_ilostat()</a></code> will return time period information by default in a raw time format (<code>time_format = 'raw'</code>), which is a character vector with the following syntax:</p>
<ul>
<li><p>Yearly data: <code>'YYYY'</code> where YYYY is the year.</p></li>
<li><p>Quarterly data: <code>'YYYYqQ'</code> where YYYY is the year and Q is the quarter (the number corresponding to the quarter from 1 to 4).</p></li>
<li><p>Monthly data: <code>'YYYYmMM'</code> where YYYY is the year and MM is the month (the number corresponding to the month from 01 to 12).</p></li>
</ul>
<p>To ease the use of data for plotting or time-series analysis techniques, the function can also return POSIXct dates (using <code>time_format = 'date'</code>) or numeric dates (using <code>time_format = 'num'</code>).</p>
<p>For instance, the following will return quarterly unemployment data by sex and age, with the time dimension in numeric format:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_TUNE_SEX_AGE_NB_Q'</span>, <span class="dt">time_format =</span> <span class="st">'num'</span>) </a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 3a. Extract, ‘Quarterly unemployment by sex and age’</caption>
<thead><tr class="header">
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
<th align="right">time</th>
<th align="right">obs_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ALB</td>
<td align="left">BA:480</td>
<td align="left">UNE_TUNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_5YRBANDS_TOTAL</td>
<td align="right">2012</td>
<td align="right">168.4427</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="left">BA:480</td>
<td align="left">UNE_TUNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_5YRBANDS_Y15-19</td>
<td align="right">2012</td>
<td align="right">11.8040</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
<td align="left">BA:480</td>
<td align="left">UNE_TUNE_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_5YRBANDS_Y20-24</td>
<td align="right">2012</td>
<td align="right">40.1643</td>
</tr>
</tbody>
</table>
<p>The following will return monthly time-related underemployment data by sex and age, with the time dimension in POSIXct date format:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'TRU_TTRU_SEX_AGE_NB_M'</span>, <span class="dt">time_format =</span> <span class="st">'date'</span>) </a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 3b. Extract, Monthly time-related underemployment by sex and age</caption>
<thead><tr class="header">
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
<th align="left">time</th>
<th align="right">obs_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">BRA</td>
<td align="left">BA:3047</td>
<td align="left">TRU_TTRU_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_YGE15</td>
<td align="left">2002-03-01</td>
<td align="right">828.170</td>
</tr>
<tr class="even">
<td align="left">BRA</td>
<td align="left">BA:3047</td>
<td align="left">TRU_TTRU_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_YGE15</td>
<td align="left">2002-04-01</td>
<td align="right">729.023</td>
</tr>
<tr class="odd">
<td align="left">BRA</td>
<td align="left">BA:3047</td>
<td align="left">TRU_TTRU_SEX_AGE_NB</td>
<td align="left">SEX_T</td>
<td align="left">AGE_YTHADULT_YGE15</td>
<td align="left">2002-05-01</td>
<td align="right">692.274</td>
</tr>
</tbody>
</table>
</div>
<div id="cached-data" class="section level1">
<h1 class="hasAnchor">
<a href="#cached-data" class="anchor"></a>Cached data</h1>
<p>The function <code><a href="../reference/get_ilostat.html">get_ilostat()</a></code> stores cached data by default at <code><a href="https://www.rdocumentation.org/packages/base/topics/file.path">file.path(tempdir(), "ilostat")</a></code> in <code>rds</code> binary format.</p>
<p>However, via the <code>cache_dir</code> arguments, it is also possible to choose a different work directory to store data in, and via the <code>cache_format</code> arguments you can save it in other formats, such as <code>csv</code>, <code>dta</code>, <code>sav</code>, and <code>sas7bdat</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'TRU_TTRU_SEX_AGE_NB_M'</span>, <span class="dt">cache_dir =</span> <span class="st">'c:/temp'</span>, <span class="dt">cache_format =</span> <span class="st">'dta'</span>) </a></code></pre></div>
<p>These arguments can also be set using <code><a href="https://www.rdocumentation.org/packages/base/topics/options">options(ilostat_cache_dir = 'C:/temp')</a></code> and <code><a href="https://www.rdocumentation.org/packages/base/topics/options">options(ilostat_cache_format = 'dta')</a></code>.</p>
<p>The name of the cache file is built using <code><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0(segment, "-", id, "-", type,"-",time_format, "-", last_toc_update ,paste0(".", cache_format))</a></code>, with ‘last_toc_update’ being the latest update of the dataset from the table of contents.</p>
<p>With the argument <code>back = FALSE</code>, datasets are downloaded and cached without being returned in R. This quiet setting is convenient particularly when downloading large amounts of data or datasets.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="kw"><a href="../reference/get_ilostat_toc.html">get_ilostat_toc</a></span>(<span class="dt">search =</span> <span class="st">'SDG'</span>),   <span class="dt">cache_dir =</span> <span class="st">'c:/temp'</span>, <span class="dt">cache_format =</span> <span class="st">'dta'</span>, </a>
<a class="sourceLine" id="cb20-2" data-line-number="2">                                                    <span class="dt">back =</span> <span class="ot">FALSE</span>) </a></code></pre></div>
</div>
<div id="filter-data" class="section level1">
<h1 class="hasAnchor">
<a href="#filter-data" class="anchor"></a>Filter data</h1>
<p>Once you have retrieved and/or cached the dataset(s) you need, advanced <code>filters</code> can help you refine your data selection and facilitate reproducible analysis. You can apply several different filters to your datasets, to filter the data by reference area, sex, classification item, etc.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">ilostat_cache_dir =</span> <span class="st">'C:/temp'</span>)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_2EAP_SEX_AGE_RT_A'</span>, <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">                                                    <span class="dt">ref_area =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'BRA'</span>, <span class="st">'ZAF'</span>), </a>
<a class="sourceLine" id="cb21-4" data-line-number="4">                                                    <span class="dt">sex =</span> <span class="st">'T'</span>, </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">                                                    <span class="dt">classif1 =</span> <span class="st">'AGE_YTHADULT_Y15-24'</span>))</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(dat, ref_area, sex, classif1)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   ref_area sex   classif1                n
##   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;               &lt;int&gt;
## 1 BRA      SEX_T AGE_YTHADULT_Y15-24    33
## 2 ZAF      SEX_T AGE_YTHADULT_Y15-24    33</code></pre>
<p><br></p>
<p>The argument <code>detail</code> set a default filter of aggregation. For instance, <code>detail = 'serieskeysonly'</code> will return distinct combinations of collection/ref_area/source/indicator/sex/classif1/classif2, whereas <code>detail = 'dataonly'</code> will remove the columns obs_status/note_classif/note_indicator/note_source from the dataset and <code>detail = 'serieskeysonly'</code> will select the best source (based on the lowest source sort id) at the collection/ref_area/./indicator/sex/classif1/classif2/time levels.</p>
<p><br></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">ilostat_cache_dir =</span> <span class="st">'C:/temp'</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_2EAP_SEX_AGE_RT_A'</span>, <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">                                                    <span class="dt">ref_area =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'BRA'</span>, <span class="st">'ZAF'</span>), </a>
<a class="sourceLine" id="cb23-4" data-line-number="4">                                                    <span class="dt">sex =</span> <span class="st">'M'</span>, </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">                                                    <span class="dt">classif1 =</span> <span class="st">'AGE_YTHADULT_Y15'</span>), </a>
<a class="sourceLine" id="cb23-6" data-line-number="6">                                                <span class="dt">detail =</span> <span class="st">'serieskeysonly'</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 4a. Extract, Youth male unemployment rate in Brazil and South Africa (ILO modelled estimates, Nov. 2018), ‘Series Key’</caption>
<thead><tr class="header">
<th align="left">collection</th>
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ILOEST</td>
<td align="left">BRA</td>
<td align="left">XA:2002</td>
<td align="left">UNE_2EAP_SEX_AGE_RT</td>
<td align="left">SEX_M</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
</tr>
<tr class="even">
<td align="left">ILOEST</td>
<td align="left">ZAF</td>
<td align="left">XA:2192</td>
<td align="left">UNE_2EAP_SEX_AGE_RT</td>
<td align="left">SEX_M</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
</tr>
</tbody>
</table>
<p><br></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># options(ilostat_cache_dir = 'C:/temp')</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_2EAP_SEX_AGE_RT_A'</span>, <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">                                                    <span class="dt">ref_area =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'BRA'</span>, <span class="st">'ZAF'</span>), </a>
<a class="sourceLine" id="cb24-4" data-line-number="4">                                                    <span class="dt">sex =</span> <span class="st">'F'</span>, </a>
<a class="sourceLine" id="cb24-5" data-line-number="5">                                                    <span class="dt">classif1 =</span> <span class="st">'AGE_YTHADULT_Y15'</span>), </a>
<a class="sourceLine" id="cb24-6" data-line-number="6">                                                <span class="dt">detail =</span> <span class="st">'dataonly'</span>)</a></code></pre></div>
<p><br></p>
<table class="table">
<caption>Table 4b. Extract, Youth female unemployment rate in Brazil and South Africa (ILO modelled estimates, Nov. 2018)</caption>
<thead><tr class="header">
<th align="left">ref_area</th>
<th align="left">source</th>
<th align="left">indicator</th>
<th align="left">sex</th>
<th align="left">classif1</th>
<th align="left">time</th>
<th align="right">obs_value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">BRA</td>
<td align="left">XA:2002</td>
<td align="left">UNE_2EAP_SEX_AGE_RT</td>
<td align="left">SEX_F</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
<td align="left">1991</td>
<td align="right">14.241</td>
</tr>
<tr class="even">
<td align="left">BRA</td>
<td align="left">XA:2002</td>
<td align="left">UNE_2EAP_SEX_AGE_RT</td>
<td align="left">SEX_F</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
<td align="left">1992</td>
<td align="right">14.800</td>
</tr>
<tr class="odd">
<td align="left">BRA</td>
<td align="left">XA:2002</td>
<td align="left">UNE_2EAP_SEX_AGE_RT</td>
<td align="left">SEX_F</td>
<td align="left">AGE_YTHADULT_Y15-24</td>
<td align="left">1993</td>
<td align="right">13.989</td>
</tr>
</tbody>
</table>
<p>In order to delete files from the cache just run:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw"><a href="../reference/clean_ilostat_cache.html">clean_ilostat_cache</a></span>()</a></code></pre></div>
<pre><code>## Deleted ilostat files from C:\Users\bescond\AppData\Local\Temp\RtmpKid78y/ilostat</code></pre>
</div>
<div id="plot-data" class="section level1">
<h1 class="hasAnchor">
<a href="#plot-data" class="anchor"></a>Plot data</h1>
<blockquote>
<p>Now that you found the datasets you needed and filtered them to have the desired data, you can start manipulating ILOSTAT data in a reproducible manner, and even use your other favourite R packages to make some great data visualizations.</p>
</blockquote>
<p>For example, you can use <code>ggplot2</code> and <code>dplyr</code> to visually compare trends in male labour force participation rate in Germany, France and the United States, since 2005 (see below). This lineal graph allows us to see that the male labour force participation rate is considerably higher in the United States than in Germany and France, but it has been decreasing at a steady pace since around 2008, closing the gap in participation rates particularly with Germany, where the male labour force participation rate slightly increased in the last period observed.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(Rilostat)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(ggplot2, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(dplyr, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">  <span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'EAP_DWAM_NOC_RT_A'</span>, </a>
<a class="sourceLine" id="cb27-6" data-line-number="6">              <span class="dt">time_format =</span> <span class="st">'num'</span>, </a>
<a class="sourceLine" id="cb27-7" data-line-number="7">              <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>( <span class="dt">ref_area =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'FRA'</span>, <span class="st">'USA'</span>, <span class="st">'DEU'</span>), </a>
<a class="sourceLine" id="cb27-8" data-line-number="8">                              <span class="dt">timefrom =</span> <span class="dv">2005</span>, <span class="dt">timeto =</span> <span class="dv">2017</span>))  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="st">  </span><span class="kw">select</span>(ref_area, time, obs_value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> time, <span class="dt">y =</span> obs_value, <span class="dt">colour =</span> ref_area)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-11" data-line-number="11"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-12" data-line-number="12"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">'Male labour force participation rate in selected countries, 2005-2017'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-13" data-line-number="13"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">2005</span>, <span class="dv">2017</span>, <span class="dv">3</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-14" data-line-number="14"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">"Year"</span>, <span class="dt">y=</span><span class="st">"Male LFPR (%)"</span>, <span class="dt">colour=</span><span class="st">"Country:"</span>) <span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb27-15" data-line-number="15"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"top"</span>, <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<p><br></p>
<p><img src="g1_ts.png" width="100%"><br><br></p>
<blockquote>
<p>You can also build interesting (and visually telling) stacked columns or bars.</p>
</blockquote>
<p>For example, based on ILOSTAT data, you can plot the distribution of employed persons by economic class (defined according to the household’s per capita income/consumption per day). You can even do it with several disaggregations: in the example below, we chose to show the employment distribution by economic class separately for men and women and for youth and adults. From this figure, we clearly understand that working poverty (being poor in spite of being employed) affects youth much more than adults, and women more than men.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(Rilostat)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(ggplot2)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'ggplot2'</span>)}</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(dplyr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'dplyr'</span>)}</a>
<a class="sourceLine" id="cb28-4" data-line-number="4"></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">    <span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'EMP_2EMP_SEX_AGE_CLA_DT_A'</span>, </a>
<a class="sourceLine" id="cb28-6" data-line-number="6">                <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>( <span class="dt">ref_area =</span> <span class="st">'ZAF'</span>, </a>
<a class="sourceLine" id="cb28-7" data-line-number="7">                                <span class="dt">time =</span> <span class="st">'1999'</span>, </a>
<a class="sourceLine" id="cb28-8" data-line-number="8">                                <span class="dt">sex =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'M'</span>, <span class="st">'F'</span>), </a>
<a class="sourceLine" id="cb28-9" data-line-number="9">                                <span class="dt">classif1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'Y15-24'</span>, <span class="st">'YGE25'</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-10" data-line-number="10"><span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(<span class="op">!</span>classif2 <span class="op">%in%</span><span class="st"> 'CLA_ECOCLA_TOTAL'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-11" data-line-number="11"><span class="st">    </span><span class="kw">mutate</span>( <span class="dt">sex =</span>       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(sex) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">recode_factor</span>(</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">                                <span class="st">'SEX_M'</span> =<span class="st"> 'Male'</span>, </a>
<a class="sourceLine" id="cb28-13" data-line-number="13">                                <span class="st">'SEX_F'</span> =<span class="st"> 'Female'</span>), </a>
<a class="sourceLine" id="cb28-14" data-line-number="14">            <span class="dt">classif1 =</span>  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(classif1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">recode_factor</span>(</a>
<a class="sourceLine" id="cb28-15" data-line-number="15">                                <span class="st">'AGE_YTHADULT_YGE25'</span> =<span class="st"> 'Adult'</span>, </a>
<a class="sourceLine" id="cb28-16" data-line-number="16">                                <span class="st">'AGE_YTHADULT_Y15-24'</span> =<span class="st"> 'Youth'</span>),</a>
<a class="sourceLine" id="cb28-17" data-line-number="17">            <span class="dt">classif2 =</span>  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(classif2) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">recode_factor</span>(</a>
<a class="sourceLine" id="cb28-18" data-line-number="18">                                <span class="st">'CLA_ECOCLA_USDLT2'</span> =<span class="st"> '&lt;US$1.9'</span>, </a>
<a class="sourceLine" id="cb28-19" data-line-number="19">                                <span class="st">'CLA_ECOCLA_USDGE2LT3'</span> =<span class="st"> '&gt;=US$1.9 &amp; &lt;US$3.2'</span>, </a>
<a class="sourceLine" id="cb28-20" data-line-number="20">                                <span class="st">'CLA_ECOCLA_USDGE3LT5'</span> =<span class="st"> '&gt;=US$3.2 &amp; &lt;US$5.5'</span>, </a>
<a class="sourceLine" id="cb28-21" data-line-number="21">                                <span class="st">'CLA_ECOCLA_USDGE5'</span> =<span class="st"> '&gt;=US$5.5'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-22" data-line-number="22"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">y=</span>obs_value, <span class="dt">x=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(classif1), <span class="dt">fill=</span>classif2)) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-23" data-line-number="23"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">"identity"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-24" data-line-number="24"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">as.factor</a></span>(sex)) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-25" data-line-number="25"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">"top"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-26" data-line-number="26"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">"Employment by economic class, sex and age, South Africa, 1999"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-27" data-line-number="27"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">"Age group"</span>, <span class="dt">y=</span><span class="st">"Distribution of economic class (%)"</span>, <span class="dt">fill=</span><span class="st">"Economic class : "</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-28" data-line-number="28"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-29" data-line-number="29"><span class="st">    </span><span class="kw">scale_fill_brewer</span>(<span class="dt">type =</span> <span class="st">"div"</span>)</a></code></pre></div>
<p><br><img src="g1_eco.png" width="100%"></p>
<p><br><br></p>
<blockquote>
<p>You can also combine the ilostat package with other packages to create triangular graphs, plotting three different indicators which relate to the same topic and whose observations are mutually exclusive.</p>
</blockquote>
<p>You can use this type of graph, for instance, to visually convey the share of the employed population working in agriculture, industry and services, all three compared, and even more revealing, compare this across countries.</p>
<p>In the example below, we used three different indicators of labour underutilization (unemployment, time-related underemployment and discouraged job-seekers) to study how they are inter-related in selected countries. These three population groups are all mutually exclusive, but they are all part of the broad category of labour underutilization. Unemployment represents all persons not in employment, available for employment and actively seeking employment, while discouraged job-seekers are those persons not in employment and available for employment who do not actively look for employment for specific reasons having to do with the situation in the labour market, and time-related underemployment refers to persons in employment who would like to work more hours and are available to work more hours than their current working time. The graph below brings to light the differences across countries in the labour underutilization composition, by showing where unemployment is the biggest concern, as opposed to time-related underemployment or discouragement.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(Rilostat)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(tidyr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'tidyr'</span>)}</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(dplyr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'dplyr'</span>)}</a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(plotrix)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'plotrix'</span>)}</a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(stringr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'stringr'</span>)}</a>
<a class="sourceLine" id="cb29-6" data-line-number="6"></a>
<a class="sourceLine" id="cb29-7" data-line-number="7">triangle &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'EIP_WDIS_SEX_AGE_NB_A'</span>, </a>
<a class="sourceLine" id="cb29-8" data-line-number="8">                               <span class="st">'UNE_TUNE_SEX_AGE_NB_A'</span>, </a>
<a class="sourceLine" id="cb29-9" data-line-number="9">                               <span class="st">'TRU_TTRU_SEX_AGE_NB_A'</span>), </a>
<a class="sourceLine" id="cb29-10" data-line-number="10">                        <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb29-11" data-line-number="11">                                      <span class="dt">ref_area =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'ZAF'</span>, <span class="st">'MNG'</span>, <span class="st">'CHL'</span>), </a>
<a class="sourceLine" id="cb29-12" data-line-number="12">                                      <span class="dt">source =</span> <span class="st">'BA'</span>,</a>
<a class="sourceLine" id="cb29-13" data-line-number="13">                                      <span class="dt">sex =</span> <span class="st">'SEX_T'</span>, </a>
<a class="sourceLine" id="cb29-14" data-line-number="14">                                      <span class="dt">classif1 =</span> <span class="st">'YGE15'</span>, </a>
<a class="sourceLine" id="cb29-15" data-line-number="15">                                      <span class="dt">time =</span> <span class="st">'2013'</span>),</a>
<a class="sourceLine" id="cb29-16" data-line-number="16">                              <span class="dt">detail =</span> <span class="st">'dataonly'</span>, </a>
<a class="sourceLine" id="cb29-17" data-line-number="17">                              <span class="dt">cmd =</span> <span class="st">"dat %&gt;% select(ref_area, indicator, obs_value)"</span>, </a>
<a class="sourceLine" id="cb29-18" data-line-number="18">                              <span class="dt">quiet =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-19" data-line-number="19"><span class="st">            </span><span class="kw"><a href="../reference/label_ilostat.html">label_ilostat</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-20" data-line-number="20"><span class="st">            </span><span class="kw">group_by</span>(ref_area.label) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-21" data-line-number="21"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">obs_value =</span> obs_value <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(obs_value)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-22" data-line-number="22"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">indicator.label =</span> indicator.label <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-23" data-line-number="23"><span class="st">                                      </span><span class="kw">str_replace</span>(<span class="kw">fixed</span>(<span class="st">' by sex and age (thousands)'</span>), <span class="st">''</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-24" data-line-number="24"><span class="st">            </span><span class="kw">spread</span>(indicator.label, obs_value)</a>
<a class="sourceLine" id="cb29-25" data-line-number="25"></a>
<a class="sourceLine" id="cb29-26" data-line-number="26"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/par">par</a></span>(<span class="dt">cex=</span><span class="fl">0.75</span>, <span class="dt">mar=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb29-27" data-line-number="27">positions &lt;-<span class="st"> </span>plotrix<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/plotrix/topics/triax.plot">triax.plot</a></span>(</a>
<a class="sourceLine" id="cb29-28" data-line-number="28">                      <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(triangle[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]),</a>
<a class="sourceLine" id="cb29-29" data-line-number="29">                      <span class="dt">show.grid =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb29-30" data-line-number="30">                      <span class="dt">main =</span> <span class="st">'Selected labour underutilization indicators'</span>,</a>
<a class="sourceLine" id="cb29-31" data-line-number="31">                      <span class="dt">label.points=</span> <span class="ot">FALSE</span>, <span class="dt">point.labels =</span> triangle<span class="op">$</span>ref_area.label,</a>
<a class="sourceLine" id="cb29-32" data-line-number="32">                      <span class="dt">col.axis=</span><span class="st">"gray50"</span>, <span class="dt">col.grid=</span><span class="st">"gray90"</span>,</a>
<a class="sourceLine" id="cb29-33" data-line-number="33">                      <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">cex.axis=</span><span class="fl">1.2</span>, <span class="dt">cex.ticks=</span><span class="fl">0.7</span>, <span class="dt">col=</span><span class="st">"grey50"</span>)</a>
<a class="sourceLine" id="cb29-34" data-line-number="34">                     </a>
<a class="sourceLine" id="cb29-35" data-line-number="35">                     </a>
<a class="sourceLine" id="cb29-36" data-line-number="36">ind &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which">which</a></span>(triangle<span class="op">$</span>ref_area.label <span class="op">%in%</span><span class="st">  </span>triangle<span class="op">$</span>ref_area.label)</a>
<a class="sourceLine" id="cb29-37" data-line-number="37"></a>
<a class="sourceLine" id="cb29-38" data-line-number="38">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(positions<span class="op">$</span>xypos, <span class="dt">geo =</span>  triangle<span class="op">$</span>ref_area.label)</a>
<a class="sourceLine" id="cb29-39" data-line-number="39"></a>
<a class="sourceLine" id="cb29-40" data-line-number="40"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/points">points</a></span>(df<span class="op">$</span>x[ind], df<span class="op">$</span>y[ind], <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="st">"red"</span>, <span class="dt">pch=</span><span class="dv">19</span>)</a>
<a class="sourceLine" id="cb29-41" data-line-number="41"></a>
<a class="sourceLine" id="cb29-42" data-line-number="42"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/text">text</a></span>(df<span class="op">$</span>x[ind], df<span class="op">$</span>y[ind], df<span class="op">$</span>geo[ind], <span class="dt">adj =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>,<span class="op">-</span><span class="dv">1</span>), <span class="dt">cex=</span><span class="fl">1.5</span>) </a></code></pre></div>
<p><br><img src="g1_tri.png" width="100%"></p>
<p><br><br></p>
<blockquote>
<p>It is also possible to create maps showing how indicators behave across the world at a given point in time (static maps) or even through time (dynamic maps allowing the user to scroll over the available time period).</p>
</blockquote>
<p>For instance, below we have built a map to see differences across the world in the youth unemployment rate. For this, we have selected data from a compilation which is methodologically robust and consistent across countries to ensure international comparability: the ILO modelled estimates (from November 2017). You can change the legend settings to use the color coding that best suits your data. In our case, the colour scale used allows us to quickly see that youth unemployment rates are particularly high in Southern and Northern Africa.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(Rilostat)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(plotly)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'plotly'</span>)}</a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(dplyr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'dplyr'</span>)}</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="cf">if</span>(<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(stringr)){<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'stringr'</span>)}</a>
<a class="sourceLine" id="cb30-5" data-line-number="5"></a>
<a class="sourceLine" id="cb30-6" data-line-number="6">dat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ilostat.html">get_ilostat</a></span>(<span class="dt">id =</span> <span class="st">'UNE_2YAP_NOC_RT_A'</span>, <span class="dt">filters =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">time =</span> <span class="st">'2017'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(<span class="op">!</span><span class="kw">str_sub</span>(ref_area,<span class="dv">1</span>,<span class="dv">1</span>) <span class="op">%in%</span><span class="st"> 'X'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-8" data-line-number="8"><span class="st">            </span><span class="kw">select</span>(ref_area, obs_value) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-9" data-line-number="9"><span class="st">            </span><span class="kw">left_join</span>(  Rilostat<span class="op">:::</span>ilostat_ref_area_mapping <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-10" data-line-number="10"><span class="st">                            </span><span class="kw">select</span>(ref_area, ref_area_plotly)<span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="st">                            </span><span class="kw"><a href="../reference/label_ilostat.html">label_ilostat</a></span>(<span class="dt">code =</span> <span class="st">'ref_area'</span>), </a>
<a class="sourceLine" id="cb30-12" data-line-number="12">                        <span class="dt">by =</span> <span class="st">"ref_area"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-13" data-line-number="13"><span class="st">            </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(<span class="op">!</span>obs_value <span class="op">%in%</span><span class="st"> </span><span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb30-14" data-line-number="14"></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">    </a>
<a class="sourceLine" id="cb30-16" data-line-number="16">            </a>
<a class="sourceLine" id="cb30-17" data-line-number="17">dat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-18" data-line-number="18"><span class="st">    </span><span class="kw">plot_geo</span>( </a>
<a class="sourceLine" id="cb30-19" data-line-number="19">            <span class="dt">z =</span> <span class="op">~</span>obs_value, </a>
<a class="sourceLine" id="cb30-20" data-line-number="20">            <span class="dt">text =</span> <span class="op">~</span>ref_area.label, </a>
<a class="sourceLine" id="cb30-21" data-line-number="21">            <span class="dt">locations =</span> <span class="op">~</span>ref_area_plotly</a>
<a class="sourceLine" id="cb30-22" data-line-number="22">        ) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-23" data-line-number="23"><span class="st">        </span><span class="kw">add_trace</span>(</a>
<a class="sourceLine" id="cb30-24" data-line-number="24">            <span class="dt">colors =</span> <span class="st">'Blues'</span>,</a>
<a class="sourceLine" id="cb30-25" data-line-number="25">            <span class="dt">marker =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb30-26" data-line-number="26">                        <span class="dt">line =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb30-27" data-line-number="27">                            <span class="dt">color =</span> <span class="kw">toRGB</span>(<span class="st">"grey"</span>), </a>
<a class="sourceLine" id="cb30-28" data-line-number="28">                            <span class="dt">width =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb30-29" data-line-number="29">                    ), </a>
<a class="sourceLine" id="cb30-30" data-line-number="30">            <span class="dt">showscale =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb30-31" data-line-number="31">        ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-32" data-line-number="32"><span class="st">        </span><span class="kw">colorbar</span>(</a>
<a class="sourceLine" id="cb30-33" data-line-number="33">            <span class="dt">title =</span> <span class="st">'%'</span>, </a>
<a class="sourceLine" id="cb30-34" data-line-number="34">            <span class="dt">len =</span> <span class="fl">0.5</span></a>
<a class="sourceLine" id="cb30-35" data-line-number="35">        ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-36" data-line-number="36"><span class="st">        </span><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/layout">layout</a></span>(</a>
<a class="sourceLine" id="cb30-37" data-line-number="37">          <span class="dt">title =</span> <span class="st">'Youth unemployment rate in 2017 (ILO modelled estimates, Nov. 2018)'</span>, </a>
<a class="sourceLine" id="cb30-38" data-line-number="38">          <span class="dt">geo =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(   </a>
<a class="sourceLine" id="cb30-39" data-line-number="39">                    <span class="dt">showframe =</span> <span class="ot">FALSE</span>,  </a>
<a class="sourceLine" id="cb30-40" data-line-number="40">                    <span class="dt">showcoastlines =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb30-41" data-line-number="41">                    <span class="dt">projection =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">type =</span> <span class="st">'Mercator'</span>), </a>
<a class="sourceLine" id="cb30-42" data-line-number="42">                    <span class="dt">showcountries =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb30-43" data-line-number="43">                    <span class="dt">resolution =</span> <span class="dv">110</span>) <span class="co"># or 50</span></a>
<a class="sourceLine" id="cb30-44" data-line-number="44">            ) </a></code></pre></div>
<p><br><img src="g1_map.png" width="100%"></p>
<p><br><br></p>
</div>
<div id="contact-information" class="section level1">
<h1 class="hasAnchor">
<a href="#contact-information" class="anchor"></a>Contact information</h1>
<p>For further information on the <code>ilostat</code> R package, please contact:</p>
<ul>
<li>ILO Department of Statistics (<code>ilostat@ilo.org</code>)</li>
</ul>
<p>For specific issues concerning code source, please report on <a href="https://github.com/ilostat/Rilostat/issues">github</a></p>
<p>For questions related to the ilostat database contact (<code>ilostat@ilo.org</code>) or visit <a href="http://www.ilo.org/ilostat">ilostat website</a></p>
<p>Permission to reproduce ILO publication and data: the reproduction of ILO material is generally authorized for non-commercial purposes and within established limits. However, you may need to submit a formal request in certain circumstances. for more information please refer to:</p>
<p><a href="http://www.ilo.org/global/copyright" class="uri">http://www.ilo.org/global/copyright</a></p>
<p><a href="http://www.ilo.org/global/copyright/request-for-permission" class="uri">http://www.ilo.org/global/copyright/request-for-permission</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-ilostat-r-package-in-a-few-words">The ilostat R package in a few words</a></li>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#search-for-data">Search for data</a></li>
      <li><a href="#download-data">Download data</a></li>
      <li><a href="#time-format">Time format</a></li>
      <li><a href="#cached-data">Cached data</a></li>
      <li><a href="#filter-data">Filter data</a></li>
      <li><a href="#plot-data">Plot data</a></li>
      <li><a href="#contact-information">Contact information</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by ILO Department of Statistics, David Bescond.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
